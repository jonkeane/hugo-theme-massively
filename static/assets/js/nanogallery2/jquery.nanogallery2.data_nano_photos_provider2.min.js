/* nanogallery2 - v3.0.5 - 2024-03-13 */
/**!
 * @preserve nanogallery2 - NANOPHOTOSPROVIDER2 data provider
 * Homepage: http://nanogallery2.nanostudio.org
 * Sources:  https://github.com/nanostudio-org/nanogallery2
 *
 * License:  GPLv3 and commercial licence
 * 
*/
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","nanogallery2"],e):"object"==typeof exports&&"function"==typeof require?e(require(["jquery","nanogallery2"])):e(jQuery)}((function(e){jQuery.nanogallery2.data_nano_photos_provider2=function(e,t){var o=e;function n(e){return decodeURIComponent(e)}var a=NGY2Tools.PreloaderDisplay.bind(o),r=NGY2Tools.NanoAlert,i=NGY2Tools.FilterAlbumName.bind(o),s=NGY2Tools.AlbumPostProcess.bind(o);switch(t){case"GetHiddenAlbums":case"Init":case"":break;case"AlbumGetContent":!function(t,l,d,u){var v=NGY2Item.GetIdx(o,t);""==e.I[v].title&&(e.I[v].title=n(t));var c=o.O.dataProvider+"?albumID="+t;c+="&hxs="+o.tn.settings.getH(o.GOM.curNavLevel,"xs"),c+="&wxs="+o.tn.settings.getW(o.GOM.curNavLevel,"xs"),c+="&hsm="+o.tn.settings.getH(o.GOM.curNavLevel,"sm"),c+="&wsm="+o.tn.settings.getW(o.GOM.curNavLevel,"sm"),c+="&hme="+o.tn.settings.getH(o.GOM.curNavLevel,"me"),c+="&wme="+o.tn.settings.getW(o.GOM.curNavLevel,"me"),c+="&hla="+o.tn.settings.getH(o.GOM.curNavLevel,"la"),c+="&wla="+o.tn.settings.getW(o.GOM.curNavLevel,"la"),c+="&hxl="+o.tn.settings.getH(o.GOM.curNavLevel,"xl"),c+="&wxl="+o.tn.settings.getW(o.GOM.curNavLevel,"xl"),a(!0),jQuery.ajaxSetup({cache:!1}),jQuery.support.cors=!0;try{var g=setTimeout((function(){a(!1),r(o,"Could not retrieve nanoPhotosProvider2 data (timeout).")}),6e4);o.O.debugMode&&console.log("nanoPhotosProvider2 URL: "+c),jQuery.getJSON(c,(function(e,c,m){clearTimeout(g),a(!1),function(e,t){o.O.debugMode&&(console.log("nanoPhotosProvider2 parse data:"),console.dir(t)),jQuery.each(t.album_content,(function(e,a){var r=o.O.dataProvider.substring(0,o.O.dataProvider.indexOf("nano_photos_provider2.php")),s=r+n(a.src),l=a.title,d=a.description.split("_").join(" "),u="image";void 0!==a.kind&&a.kind.length>0&&(u=a.kind);var v=a.ID,c=!1;if("album"==u&&(i(l,v)||(c=!0),""==o.O.album&&""==o.O.photoset||(c=!0)),"image"==u||!c){var g=0;void 0!==a.albumID&&(g=a.albumID);var m=void 0===a.tags?"":a.tags,h=NGY2Item.New(o,l.split("_").join(" "),d,v,g,u,m);h.setMediaURL(s,"img"),void 0!==a.dcGIF&&(h.imageDominantColors="data:image/gif;base64,"+a.dcGIF),void 0!==a.dc&&""!==a.dc&&(h.imageDominantColor=a.dc),"album"==u?h.numberItems=a.cnt:(h.imageWidth=a.imgWidth,h.imageHeight=a.imgHeight),""!=a.originalURL&&(h.downloadURL=r+n(a.originalURL));for(var b=o.GOM.curNavLevel,f=["xs","sm","me","la","xl"],p=0;p<f.length;p++)h.thumbs.url[b][f[p]]=r+n(a.t_url[p]),h.thumbs.width[b][f[p]]=parseInt(a.t_width[p]),h.thumbs.height[b][f[p]]=parseInt(a.t_height[p]);var O=o.O.fnProcessData;null!==O&&("function"==typeof O?O(h,o.O.dataProvider,t):window[O](h,o.O.dataProvider,t))}})),o.I[e].contentIsLoaded=!0}(v,e),"ok"==e.nano_status?(s(t),null!=l&&l(d,u,null)):r(o,"Could not retrieve nanoPhotosProvider2 data. Error: "+e.nano_status+" - "+e.nano_message)})).fail((function(e,t,n){clearTimeout(g),a(!1);var i="";for(var s in e)i+=s+"="+e[s]+"<br>";r(o,"Could not retrieve nanoPhotosProvider2 data. Error: "+t+", "+n+" "+i+"<br><br>URL:"+c)}))}catch(e){r(o,"Could not retrieve nanoPhotosProvider2 data. Error: "+e)}}(arguments[2],arguments[3],arguments[4],arguments[5])}}}));